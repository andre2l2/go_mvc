{{define "Index"}}
<!DOCTYPE html>
<html lang="pt-bt">
	{{template "_head"}}
	<body>
		{{template "_nav"}}
		<div class="container">
			<div class="card-footer center">
				<a href="/new" class="btn btn-primary mb-2">Novo Produto</a>
			</div>
			<section class="card">
				<div>
					<table class="table table-striped table-hover mb-0">
						<thead>
							<tr>
								<th>Nome</th>
								<th>Descrição</th>
								<th>Preço</th>
								<th>Quantidade</th>
							</tr>
						</thead>
						<tbody>
							{{range .}}
							<tr>
								<td>{{.Name}}</td>
								<td>{{.Description}}</td>
								<td>{{.Price}}</td>
								<td>{{.Total}}</td>
								<td>
									<a href="/edit?id={{.Id}}" class="btn btn-info">Editar</a>
								</td>
								<td>
									<button onclick="deleteProduct('{{.Id}}')" class="btn btn-danger">Deletar</button>
								</td>
							</tr>
							{{end}}
						</tbody>
					</table>
				</div>
			</section>
		</div>

		<script>
			function deleteProduct(id) {
				Swal.fire({
					title: "Deseja realmente apagar esse produto?",
					showCancelButton: true,
					confirmButtonText: "Save",
					confirmButtonText: "Sim",
					cancelButtonText: "Não",
				}).then((result) => {
					if (result.isConfirmed) {
						window.location = "/delete?id=" + id;
					}
				});
			}
		</script>
	</body>
</html>
{{end}}
